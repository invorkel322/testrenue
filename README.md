# Тестовое задание Renue

## Краткая информация
Для запуска необходимо выполнить следующие шаги:

1. Запустить Bash скрипт `install.sh` на сервере **host**.
2. Запустить Bash скрипт `setup.sh` на серверах **hosta** и **hostb**.

## Структура серверов и скриптов

| **Сервер** | **Скрипт**     |
|------------|----------------|
| **host**   | `install.sh`   |
| **hosta**  | `setup.sh`     |
| **hostb**  | `setup.sh`     |

## Описание скриптов

### `install.sh`:
- Устанавливает необходимые зависимости и инструменты (например, Ansible).
- Создает публичный SSH-ключ.
- Генерирует файлы конфигурации:
  - `inventory.ini` — инвентарь для Ansible.
  - `playbook.yml` — Ansible playbook для выполнения всех задач настройки.
- Запускает Ansible playbook для настройки серверов.

### `setup.sh`:
- Позволяет ввести публичный SSH-ключ для пользователя **DevOps**.
- Отключает SSH-авторизацию по паролю.
- Настроит авторизацию по SSH-ключам для пользователя **DevOps**.
- Выполнит дополнительные настройки безопасности и сервисов на серверах **hosta** и **hostb**.

###### task
	Тестовое задание стажировки
DevOps-инженеров
Постановка задачи
Есть 2 сервера: A и Б (hostA.renue и hostB.renue соответственно). Ubuntu Server 20.04 LTS
без предустановленных пакетов и программ. Необходимо предложить автоматизированное
решение, которое позволит:
1 Отключить авторизацию SSH по паролю. На обоих серверах.
2 Добавить пользователя DevOps, настроить авторизацию по ключам и предоставить
sudo без пароля. На обоих серверах.
3 Настроить fail2ban на сервере А с блокировкой на 1 час, если в течение 1 минуты
было 3 неудачных попыток входа.
4 На сервер A установить PostgreSQL, создать БД app и custom:
a) добавить пользователя app с паролем app, у которого будет полный доступ
к БД app;
b) добавить пользователя custom с паролем custom, у которого будет полный
доступ к БД custom;
c) добавить пользователя service с паролем service, у которого будет доступ на
чтение к обеим базам.
5 На сервер Б установить nginx и настроить его так, чтобы при обращении на
сервере к localhost (или его доменному имени) открывался сайт https://renue.ru.
6 Настроить доступ к PostgreSQL на сервере А только с сервера Б, закрыть доступ к
nginx на сервере Б с сервера А.
7 Настроить бэкапирование PostgreSQL с сервера А на сервер Б.

